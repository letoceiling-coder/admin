import{b as y,e as h,E as k,r as w,o as a,c as i,a as e,j as D,k as C,t as r,n as S,f,l as c,i as N,x as j}from"./app-98bb2cad.js";const B={class:"subscriber-detail-page"},V={class:"mb-6"},P={class:"text-muted-foreground mt-1"},R={key:0,class:"bg-card rounded-lg border border-border p-8 text-center text-muted-foreground"},T={key:1,class:"bg-card rounded-lg border border-border p-6"},E={class:"text-red-600 dark:text-red-400"},L={key:2,class:"space-y-6"},O={class:"bg-card rounded-lg border border-border overflow-hidden"},U={class:"divide-y divide-border"},z={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},A={class:"sm:col-span-2 text-foreground font-medium"},I={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},J={class:"sm:col-span-2 text-foreground"},M={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},q={class:"sm:col-span-2 text-foreground"},F={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},G={class:"sm:col-span-2 text-foreground"},H={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},K={class:"sm:col-span-2 text-foreground"},Q={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},W={class:"sm:col-span-2"},X={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},Y={class:"sm:col-span-2 font-mono text-sm text-foreground break-all"},Z={key:0,class:"bg-card rounded-lg border border-border overflow-hidden"},$={class:"p-4 text-sm text-foreground overflow-x-auto"},ee={class:"bg-card rounded-lg border border-border overflow-hidden"},te={class:"divide-y divide-border"},se={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},oe={class:"sm:col-span-2 text-foreground"},re={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 px-4 py-3"},de={class:"sm:col-span-2 text-foreground"},ie={__name:"SubscriberDetailPage",setup(ne){const g=y(),o=c(null),u=c(!1),n=c(""),b=h(()=>{var t;const s=(t=o.value)==null?void 0:t.payment_data;return s&&typeof s=="object"&&Object.keys(s).length>0});async function v(){var t,l;const s=g.params.id;if(s){u.value=!0,n.value="";try{const{data:d}=await j.get("/admin/subscribers/"+s);o.value=(d==null?void 0:d.data)??null,o.value||(n.value="Подписчик не найден")}catch(d){o.value=null,n.value=((l=(t=d.response)==null?void 0:t.data)==null?void 0:l.message)??"Ошибка загрузки"}finally{u.value=!1}}}function _(s){return!s||typeof s!="string"?"—":s.length<=12?"••••••••":s.slice(0,8)+"••••••••"+s.slice(-4)}function m(s){return s?new Date(s).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"}):"—"}function p(s){return s?new Date(s).toLocaleString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—"}return k(()=>g.params.id,v,{immediate:!0}),(s,t)=>{var d,x;const l=w("router-link");return a(),i("div",B,[e("div",V,[D(l,{to:{name:"admin.subscribers"},class:"inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground mb-2"},{default:C(()=>[...t[0]||(t[0]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),N(" К списку подписчиков ",-1)])]),_:1}),t[1]||(t[1]=e("h1",{class:"text-2xl font-bold text-foreground"},"Подписчик",-1)),e("p",P,r(((d=o.value)==null?void 0:d.domain)??"—"),1)]),u.value&&!o.value?(a(),i("div",R," Загрузка… ")):n.value?(a(),i("div",T,[e("p",E,r(n.value),1)])):o.value?(a(),i("div",L,[e("div",O,[t[9]||(t[9]=e("div",{class:"px-4 py-3 border-b border-border bg-muted/30"},[e("h2",{class:"font-semibold text-foreground"},"Основные данные")],-1)),e("dl",U,[e("div",z,[t[2]||(t[2]=e("dt",{class:"text-sm text-muted-foreground"},"Домен",-1)),e("dd",A,r(o.value.domain),1)]),e("div",I,[t[3]||(t[3]=e("dt",{class:"text-sm text-muted-foreground"},"Логин",-1)),e("dd",J,r(o.value.login),1)]),e("div",M,[t[4]||(t[4]=e("dt",{class:"text-sm text-muted-foreground"},"План",-1)),e("dd",q,r(((x=o.value.plan)==null?void 0:x.name)??"—"),1)]),e("div",F,[t[5]||(t[5]=e("dt",{class:"text-sm text-muted-foreground"},"Начало подписки",-1)),e("dd",G,r(m(o.value.subscription_start)),1)]),e("div",H,[t[6]||(t[6]=e("dt",{class:"text-sm text-muted-foreground"},"Конец подписки",-1)),e("dd",K,r(m(o.value.subscription_end)),1)]),e("div",Q,[t[7]||(t[7]=e("dt",{class:"text-sm text-muted-foreground"},"Активность",-1)),e("dd",W,[e("span",{class:S(["inline-flex rounded-full px-2 py-0.5 text-xs font-medium",o.value.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"])},r(o.value.is_active?"Активен":"Неактивен"),3)])]),e("div",X,[t[8]||(t[8]=e("dt",{class:"text-sm text-muted-foreground"},"API токен",-1)),e("dd",Y,r(_(o.value.api_token)),1)])])]),b.value?(a(),i("div",Z,[t[10]||(t[10]=e("div",{class:"px-4 py-3 border-b border-border bg-muted/30"},[e("h2",{class:"font-semibold text-foreground"},"Данные об оплате")],-1)),e("pre",$,r(JSON.stringify(o.value.payment_data,null,2)),1)])):f("",!0),e("div",ee,[t[13]||(t[13]=e("div",{class:"px-4 py-3 border-b border-border bg-muted/30"},[e("h2",{class:"font-semibold text-foreground"},"Даты")],-1)),e("dl",te,[e("div",se,[t[11]||(t[11]=e("dt",{class:"text-sm text-muted-foreground"},"Создан",-1)),e("dd",oe,r(p(o.value.created_at)),1)]),e("div",re,[t[12]||(t[12]=e("dt",{class:"text-sm text-muted-foreground"},"Обновлён",-1)),e("dd",de,r(p(o.value.updated_at)),1)])])])])):f("",!0)])}}};export{ie as default};
