import{b as V,u as j,d as q,e as B,m as N,r as S,o as s,c as d,a as t,w as C,t as k,f as v,g as u,v as m,j as E,k as M,l as c,i as P}from"./app-4a5d56cf.js";const R={class:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center px-4"},T={class:"w-full max-w-md space-y-6"},U={class:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-sm"},D={key:0,class:"rounded-md bg-red-50 dark:bg-red-900/20 p-3 text-sm text-red-800 dark:text-red-200"},$={class:"list-disc list-inside"},A={key:1,class:"rounded-md bg-green-50 dark:bg-green-900/20 p-3 text-sm text-green-800 dark:text-green-200"},O=["disabled"],z={key:0},F={key:1},G={class:"text-center text-sm text-gray-600 dark:text-gray-400"},J={__name:"ResetPasswordPage",setup(H){const g=V(),w=j(),p=q(),y=B(()=>p.loading),l=c(""),n=c(""),r=c({email:"",password:"",password_confirmation:"",token:""});N(()=>{r.value.token=g.query.token||"",r.value.email=g.query.email||""});function _(a){return!a||typeof a!="object"?null:Object.values(a).flat().filter(Boolean).join(" ")}async function h(){var a,e,i,o;l.value="",n.value="";try{await p.resetPassword({token:r.value.token,email:r.value.email,password:r.value.password,password_confirmation:r.value.password_confirmation}),n.value="Пароль успешно изменён. Можно войти с новым паролем.",setTimeout(()=>w.push({name:"admin.login"}),2e3)}catch(b){const f=((e=(a=b.response)==null?void 0:a.data)==null?void 0:e.message)??"Не удалось сбросить пароль.",x=_((o=(i=b.response)==null?void 0:i.data)==null?void 0:o.errors);l.value=x?`${f} ${x}`:f}}return(a,e)=>{const i=S("router-link");return s(),d("div",R,[t("div",T,[e[7]||(e[7]=t("div",{class:"text-center"},[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Сброс пароля"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Введите новый пароль")],-1)),t("div",U,[t("form",{onSubmit:C(h,["prevent"]),class:"space-y-4"},[l.value?(s(),d("div",D,[t("ul",$,[t("li",null,k(l.value),1)])])):v("",!0),n.value?(s(),d("div",A,k(n.value),1)):v("",!0),t("div",null,[e[3]||(e[3]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Email",-1)),u(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>r.value.email=o),type:"email",required:"",autofocus:"",readonly:"",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white transition-colors cursor-not-allowed",placeholder:"your@email.com"},null,512),[[m,r.value.email]])]),t("div",null,[e[4]||(e[4]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Новый пароль",-1)),u(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.password=o),type:"password",required:"",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none",placeholder:"Минимум 8 символов"},null,512),[[m,r.value.password]])]),t("div",null,[e[5]||(e[5]=t("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Подтверждение пароля",-1)),u(t("input",{id:"password_confirmation","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.password_confirmation=o),type:"password",required:"",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-3 py-2 text-sm text-gray-900 dark:text-white transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none",placeholder:"Повторите пароль"},null,512),[[m,r.value.password_confirmation]])]),t("button",{type:"submit",disabled:y.value,class:"w-full rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[y.value?(s(),d("span",F,"Изменение...")):(s(),d("span",z,"Изменить пароль"))],8,O)],32)]),t("p",G,[E(i,{to:"/admin/login",class:"text-primary hover:underline"},{default:M(()=>[...e[6]||(e[6]=[P("Вернуться к входу",-1)])]),_:1})])])])}}};export{J as default};
